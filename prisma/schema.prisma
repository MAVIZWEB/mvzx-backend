 generator client { provider = "prisma-client-js" }

datasource db { provider = "postgresql" url = env("DATABASE_URL") }

model User {
  id          Int       @id @default(autoincrement())
  email       String?   @unique
  pinHash     String
  wallet      Wallet?
  matrix      Matrix[]
  referrals   Referral[]
  staking     Staking[]
  createdAt   DateTime  @default(now())
}

model Wallet {
  id          Int      @id @default(autoincrement())
  address     String   @unique
  balanceMVZx Float    @default(0)
  balanceUSDT Float    @default(0)
  userId      Int      @unique
  user        User     @relation(fields: [userId], references: [id])
}

model Matrix {
  id          Int      @id @default(autoincrement())
  user        User     @relation(fields: [userId], references: [id])
  userId      Int
  stage       Int
  position    Int
  earnings    Float    @default(0)
  createdAt   DateTime @default(now())
}

model Referral {
  id          Int      @id @default(autoincrement())
  referrerId  Int
  refereeId   Int
  reward      Float
  createdAt   DateTime @default(now())
}

model Staking {
  id          Int      @id @default(autoincrement())
  user        User     @relation(fields: [userId], references: [id])
  userId      Int
  amount      Float
  startDate   DateTime @default(now())
  endDate     DateTime
  claimed     Boolean  @default(false)
}
